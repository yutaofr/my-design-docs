# RocksDB Overhead Visualization Preview

## What the Animation Shows

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RocksDB Storage Overhead                   â”‚
â”‚                   Deduplication Use Case                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scene 1: Data Structure
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”
â”‚  Key: 64 bytes (SHA-256 hash)            â”‚  â”‚Val â”‚
â”‚                                          â”‚  â”‚ 8B â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜
              72 bytes total
         8:1 key/value ratio


Scene 2: Compression Test
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
   a1b2c3d4e5f6...
   Hash Key (high entropy)
          â”‚
          â”‚  LZ4 Compression
          â–¼
   a1b2c3d4e5f6...
   No compression! (1.0x)
   
   vs JSON: 2-4x compression âœ“


Scene 3: Overhead Breakdown (Animated Stack)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Build up from left to right:

Step 1:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Raw Data 1.0x    â”‚ = 1.00x
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 2:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”
â”‚    Raw Data 1.0x    â”‚â”‚ = 1.017x
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”˜
                      Bloom
                      1.7%

Step 3:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”¬â”€â”€â”€â”
â”‚    Raw Data 1.0x    â”‚â”‚â”‚Idxâ”‚ = 1.081x
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”´â”€â”€â”€â”˜
                      Bloom Index
                      1.7%  6.4%

Step 4:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”¬â”€â”€â”€â”¬â”
â”‚    Raw Data 1.0x    â”‚â”‚â”‚Idxâ”‚â”‚ = 1.097x
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”´â”€â”€â”€â”´â”˜
                      Bloom Index Meta
                      1.7%  6.4%  1.6%

Step 5:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”¬â”€â”€â”€â”¬â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Raw Data 1.0x    â”‚â”‚â”‚Idxâ”‚â”‚Universal â”‚ = 1.297x
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”´â”€â”€â”€â”´â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      Bloom Index Meta Compact
                      1.7%  6.4%  1.6%  20%

Step 6:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”¬â”€â”€â”€â”¬â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”
â”‚    Raw Data 1.0x    â”‚â”‚â”‚Idxâ”‚â”‚Universal â”‚â”‚F â”‚ = 1.335x
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”´â”€â”€â”€â”´â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”˜
                      Bloom Index Meta Compact Frag
                      1.7%  6.4%  1.6%  20%    3.8%

                    Final: 1.33x â‰ˆ 1.3x âœ“


Scene 4: Validation
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Source                 â”‚ Overhead â”‚ Match  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Calculation            â”‚  1.33x   â”‚   âœ“    â”‚
â”‚ Document               â”‚  1.30x   â”‚   âœ“    â”‚
â”‚ Facebook Research      â”‚ 1.3-2.0x â”‚   âœ“    â”‚
â”‚ Industry Benchmarks    â”‚ 1.3-1.4x â”‚   âœ“    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        x1.3 overhead is JUSTIFIED âœ“
              âœ¨ âœ¨ âœ¨ âœ¨ âœ¨


Bonus Scene A: Overhead Comparison
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Deduplication          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 1.33x
(high-entropy)        

Generic Web App        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 1.15x
(compressible)        

JSON Documents         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 0.80x
(high compression)    

                      High-entropy data + Universal Compaction
                      â†’ Higher but justified overhead


Bonus Scene B: Key/Value Ratio Impact
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Typical Web App:
â”Œâ”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Keyâ”‚            Value: 2000 bytes               â”‚
â”‚20Bâ”‚                                            â”‚
â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Index Overhead: 0.2%


Deduplication:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”
â”‚      Key: 64 bytes               â”‚Vâ”‚
â”‚                                  â”‚8â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”˜
Index Overhead: 6.4%

Same index cost Ã· Smaller values = Higher overhead %
```

## Animation Features

1. **Smooth transitions** - Components fade in/out elegantly
2. **Progressive building** - Stack grows from left to right
3. **Color coding**:
   - ğŸ”µ Blue: Raw data baseline
   - ğŸŸ¢ Green: Bloom filter
   - ğŸŸ¡ Yellow: Index blocks (major contributor)
   - ğŸŸ£ Purple: Block metadata
   - ğŸ”´ Red: Universal Compaction (major contributor)
   - ğŸŸ  Orange: Fragmentation
4. **Running totals** - Shows cumulative overhead after each component
5. **Celebration effects** - Sparkles when validation succeeds

## Expected Runtime

- Low quality: ~25 seconds
- High quality: ~25 seconds (same duration, higher resolution)
- File size: 2-10 MB depending on quality

## Installation Quick Start

```bash
# Install manim
pip install manim

# Run the animation
manim -pql rocksdb_overhead_visualization.py RocksDBOverheadScene

# This will:
# 1. Render the video
# 2. Save to media/videos/
# 3. Automatically open it
```

See `VISUALIZATION_README.md` for full documentation.
